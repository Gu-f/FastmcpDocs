---
title: elicitation
sidebarTitle: elicitation
---

# `fastmcp.server.elicitation`

## 函数

### `get_elicitation_schema` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/elicitation.py#L99" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
get_elicitation_schema(response_type: type[T]) -> dict[str, Any]
```


获取引出响应的模式。

**参数：**
- `response_type`: 响应的类型


### `validate_elicitation_json_schema` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/elicitation.py#L118" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
validate_elicitation_json_schema(schema: dict[str, Any]) -> None
```


验证 JSON 模式是否符合 MCP 引出要求。

这确保模式与 MCP 引出要求兼容：
- 必须是对象模式
- 必须仅包含原始字段类型（string、number、integer、boolean）
- 必须是平坐的（没有嵌套对象或对象数组）
- 允许 const 字段（用于 Literal 类型）和 enum 字段（用于 Enum 类型）
- 仅允许原始类型及其可为空的变体

**参数：**
- `schema`: 要验证的 JSON 模式

**抛出异常：**
- `TypeError`: 如果模式不符合 MCP 引出要求


## 类

### `ElicitationJsonSchema` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/elicitation.py#L32" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


始终内联枚举的 MCP 引导自定义 JSON 模式生成器。

MCP 引导需要内联枚举模式，不包含 $ref/$defs 引用。
此生成器确保枚举始终内联生成以保证兼容性。
在可用时可选添加 enumNames 以获得更好的 UI 显示。


**方法：**

#### `generate_inner` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/elicitation.py#L40" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
generate_inner(self, schema: core_schema.CoreSchema) -> JsonSchemaValue
```

重写以防止为枚举生成引用。


#### `enum_schema` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/elicitation.py#L50" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
enum_schema(self, schema: core_schema.EnumSchema) -> JsonSchemaValue
```

生成内联枚举模式，带有可选的 enumNames 以获得更好的 UI。

如果枚举成员具有 _display_name_ 属性或自定义 __str__，
我们将包含 enumNames 以获得更好的 UI 表示。


### `AcceptedElicitation` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/elicitation.py#L87" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


用户接受引导时的结果。


### `ScalarElicitationType` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/elicitation.py#L95" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>
