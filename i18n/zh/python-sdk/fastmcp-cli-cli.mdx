---
title: cli
sidebarTitle: cli
---

# `fastmcp.cli.cli`


使用 Cyclopts 的 FastMCP CLI 工具。

## 函数

### `with_argv` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L68" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
with_argv(args: list[str] | None)
```


Temporarily replace sys.argv if args provided.

This context manager is used at the CLI boundary to inject
server arguments when needed, without mutating sys.argv deep
in the source loading logic.

Args are provided without the script name, so we preserve sys.argv[0]
and replace the rest.


### `version` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L91" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
version()
```


显示版本信息和平台详细信息。


### `dev` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L129" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
dev(server_spec: str | None = None) -> None
```


使用 MCP Inspector 运行 MCP 服务器进行开发。

**参数：**
- `server_spec`: Python file to run, optionally with \:object suffix, or None to auto-detect fastmcp.json


### `run` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L310" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
run(server_spec: str | None = None, *server_args: str) -> None
```


The server can be specified in several ways:

服务器可以通过四种方式指定：
1. 模块方式："server.py" - 直接运行模块，查找名为 'mcp'、'server' 或 'app' 的对象
2. 导入方式："server.py:app" - 导入并运行指定的服务器对象
3. URL 方式："http://server-url" - 连接到远程服务器并创建代理
4. MCPConfig 文件："mcp.json" - 作为 MCPConfig 文件中 MCP 服务器的代理服务器运行
5. FastMCP config: "fastmcp.json" - runs server using FastMCP configuration
6. No argument: looks for fastmcp.json in current directory

服务器参数可以在 -- 后传递：
fastmcp run server.py -- --config config.json --debug

**参数：**
- `server_spec`: Python file, object specification (file\:obj), config file, URL, or None to auto-detect


### `inspect` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L524" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
inspect(server_spec: str | None = None) -> None
```


Inspect an MCP server and display information or generate a JSON report.

This command analyzes an MCP server. Without flags, it displays a text summary.
Use --format to output complete JSON data.

**Examples:**

# Show text summary
fastmcp inspect server.py

# Output FastMCP format JSON to stdout
fastmcp inspect server.py --format fastmcp

# Save MCP protocol format to file (format required with -o)
fastmcp inspect server.py --format mcp -o manifest.json

# Inspect from fastmcp.json configuration
fastmcp inspect fastmcp.json
fastmcp inspect  # auto-detect fastmcp.json

**Args:**
- `server_spec`: Python file to inspect, optionally with \:object suffix, or fastmcp.json


### `prepare` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L765" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
prepare(config_path: Annotated[str | None, cyclopts.Parameter(help='Path to fastmcp.json configuration file')] = None, output_dir: Annotated[str | None, cyclopts.Parameter(help='Directory to create the persistent environment in')] = None, skip_source: Annotated[bool, cyclopts.Parameter(help='Skip source preparation (e.g., git clone)')] = False) -> None
```


Prepare a FastMCP project by creating a persistent uv environment.

This command creates a persistent uv project with all dependencies installed:
- Creates a pyproject.toml with dependencies from the config
- Installs all Python packages into a .venv
- Prepares the source (git clone, download, etc.) unless --skip-source

After running this command, you can use:
fastmcp run &lt;config&gt; --project &lt;output-dir&gt;

This is useful for:
- CI/CD pipelines with separate build and run stages
- Docker images where you prepare during build
- Production deployments where you want fast startup times

