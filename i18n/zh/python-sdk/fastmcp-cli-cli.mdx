---
title: cli
sidebarTitle: cli
---

# `fastmcp.cli.cli`


使用 Cyclopts 的 FastMCP CLI 工具。

## 函数

### `with_argv` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L69" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
with_argv(args: list[str] | None)
```


如果提供了参数，临时替换 sys.argv。

此上下文管理器在 CLI 边界使用，用于在需要时注入
服务器参数，而不会在源代码加载逻辑深处变更 sys.argv。


参数提供时不包含脚本名称，因此我们保留 sys.argv[0]
并替换其余部分。


### `version` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L91" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
version()
```


显示版本信息和平台详细信息。


### `dev` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L129" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
dev(server_spec: str | None = None) -> None
```


使用 MCP Inspector 运行 MCP 服务器进行开发。

**参数：**
- `server_spec`: 要运行的 Python 文件，可选带有 \:object 后缀，或 None 以自动检测 fastmcp.json


### `run` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L310" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
run(server_spec: str | None = None, *server_args: str) -> None
```


服务器可以通过几种方式指定：

服务器可以通过四种方式指定：
1. 模块方式："server.py" - 直接运行模块，查找名为 'mcp'、'server' 或 'app' 的对象
2. 导入方式："server.py:app" - 导入并运行指定的服务器对象
3. URL 方式："http://server-url" - 连接到远程服务器并创建代理
4. MCPConfig 文件："mcp.json" - 作为 MCPConfig 文件中 MCP 服务器的代理服务器运行
5. FastMCP 配置："fastmcp.json" - 使用 FastMCP 配置运行服务器
6. 无参数：在当前目录中查找 fastmcp.json

服务器参数可以在 -- 后传递：
fastmcp run server.py -- --config config.json --debug

**参数：**
- `server_spec`: Python 文件、对象规范 (file\:obj)、配置文件、URL，或 None 以自动检测


### `inspect` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L544" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
inspect(server_spec: str | None = None) -> None
```


检查 MCP 服务器并显示信息或生成 JSON 报告。

此命令分析 MCP 服务器。不带标志时，它显示文本摘要。
使用 --format 输出完整的 JSON 数据。

**Examples:**

# 显示文本摘要
fastmcp inspect server.py

# 将 FastMCP 格式 JSON 输出到标准输出
fastmcp inspect server.py --format fastmcp

# 将 MCP 协议格式保存到文件（使用 -o 时需要格式）
fastmcp inspect server.py --format mcp -o manifest.json

# 从 fastmcp.json 配置检查
fastmcp inspect fastmcp.json
fastmcp inspect  # 自动检测 fastmcp.json

**Args:**
- `server_spec`: 要检查的 Python 文件，可选带有 \:object 后缀，或 fastmcp.json


### `prepare` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/cli/cli.py#L785" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
prepare(config_path: Annotated[str | None, cyclopts.Parameter(help='Path to fastmcp.json configuration file')] = None, output_dir: Annotated[str | None, cyclopts.Parameter(help='Directory to create the persistent environment in')] = None, skip_source: Annotated[bool, cyclopts.Parameter(help='Skip source preparation (e.g., git clone)')] = False) -> None
```


通过创建持久性 uv 环境来准备 FastMCP 项目。

此命令创建一个安装了所有依赖的持久性 uv 项目：
- 从配置中创建带有依赖的 pyproject.toml
- 将所有 Python 包安装到 .venv 中
- 准备源代码（git clone、下载等），除非使用 --skip-source

运行此命令后，您可以使用：
fastmcp run &lt;config&gt; --project &lt;output-dir&gt;

这对以下情况很有用：
- 具有分离的构建和运行阶段的 CI/CD 管道
- 在构建期间准备的 Docker 镜像
- 需要快速启动时间的生产部署

