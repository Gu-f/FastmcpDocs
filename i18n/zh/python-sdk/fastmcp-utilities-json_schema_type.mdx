---
title: json_schema_type
sidebarTitle: json_schema_type
---

# `fastmcp.utilities.json_schema_type`


将 JSON 模式转换为具有验证的 Python 类型。

json_schema_to_type 函数将 JSON 模式转换为可与 Pydantic 一起用于验证的 Python 类型。它支持：

- 基本类型（字符串、数字、整数、布尔值、空值）
- 复杂类型（数组、对象）
- 格式约束（日期时间、电子邮件、URI）
- 数值约束（最小值、最大值、倍数）
- 字符串约束（最小长度、最大长度、模式）
- 数组约束（最少项数、最多项数、唯一项）
- 带默认值的对象属性
- 引用和递归模式
- 枚举和常量
- 联合类型

示例：
    ```python
    schema = {
        "type": "object",
        "properties": {
            "name": {"type": "string", "minLength": 1},
            "age": {"type": "integer", "minimum": 0},
            "email": {"type": "string", "format": "email"}
        },
        "required": ["name", "age"]
    }

    # 名称是可选的，如果未提供，将从模式的 "title" 属性中推断
    Person = json_schema_to_type(schema)
    # 创建一个具有 name、age 和可选 email 字段的验证数据类
    ```


## 函数

### `json_schema_to_type` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/json_schema_type.py#L110" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
json_schema_to_type(schema: Mapping[str, Any], name: str | None = None) -> type
```


将 JSON 模式转换为适当的具有验证的 Python 类型。

**参数：**
- `schema`: 定义类型结构和验证规则的 JSON 模式字典
- `name`: 对象模式的可选名称。仅在模式类型为 "object" 时允许。
如果对象未提供，名称将从模式的 "title"
属性中推断或默认为 "Root"。

**返回值：**
- 具有 Pydantic 验证的 Python 类型（通常为对象的数据类）

**异常：**
- `ValueError`: 如果为非对象模式提供了名称

**示例：**

从对象模式创建数据类：
```python
schema = {
    "type": "object",
    "title": "Person",
    "properties": {
        "name": {"type": "string", "minLength": 1},
        "age": {"type": "integer", "minimum": 0},
        "email": {"type": "string", "format": "email"}
    },
    "required": ["name", "age"]
}

Person = json_schema_to_type(schema)
# 创建一个具有 name、age 和可选 email 字段的数据类：
# @dataclass
# class Person:
#     name: str
#     age: int
#     email: str | None = None
```
Person(name="John", age=30)

创建带约束的标量类型：
```python
schema = {
    "type": "string",
    "minLength": 3,
    "pattern": "^[A-Z][a-z]+$"
}

NameType = json_schema_to_type(schema)
# 创建 Annotated[str, StringConstraints(min_length=3, pattern="^[A-Z][a-z]+$")]

@dataclass
class Name:
    name: NameType
```


## 类

### `JSONSchema` <sup><a href="https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/json_schema_type.py#L77" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>
