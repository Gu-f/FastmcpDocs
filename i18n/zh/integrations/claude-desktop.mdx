---
title: Claude Desktop ğŸ¤ FastMCP
sidebarTitle: Claude Desktop
description: å°† FastMCP æœåŠ¡å™¨è¿æ¥åˆ° Claude Desktop
icon: message-smile
---

import { VersionBadge } from "/snippets/version-badge.mdx"
import { LocalFocusTip } from "/snippets/local-focus-zh.mdx"

<LocalFocusTip />

Claude Desktop é€šè¿‡æœ¬åœ° STDIO è¿æ¥å’Œè¿œç¨‹æœåŠ¡å™¨ï¼ˆbetaï¼‰æ”¯æŒ MCP æœåŠ¡å™¨ï¼Œå…è®¸æ‚¨ä½¿ç”¨ FastMCP æœåŠ¡å™¨çš„è‡ªå®šä¹‰å·¥å…·ã€èµ„æºå’Œæç¤ºæ¥æ‰©å±• Claude çš„åŠŸèƒ½ã€‚

<Note>
è¿œç¨‹ MCP æœåŠ¡å™¨æ”¯æŒç›®å‰å¤„äº beta é˜¶æ®µï¼Œé€‚ç”¨äº Claude Proã€Maxã€Team å’Œ Enterprise è®¡åˆ’çš„ç”¨æˆ·ï¼ˆæˆªè‡³ 2025 å¹´ 6 æœˆï¼‰ã€‚å¤§å¤šæ•°ç”¨æˆ·ä»ç„¶éœ€è¦ä½¿ç”¨æœ¬åœ° STDIO è¿æ¥ã€‚
</Note>

<Note>
æœ¬æŒ‡å—ä¸“é—¨ä»‹ç»åœ¨ Claude Desktop ä¸­ä½¿ç”¨ FastMCP æœåŠ¡å™¨ã€‚æœ‰å…³ä¸€èˆ¬çš„ Claude Desktop MCP è®¾ç½®å’Œå®˜æ–¹ç¤ºä¾‹ï¼Œè¯·å‚é˜…[å®˜æ–¹ Claude Desktop å¿«é€Ÿå…¥é—¨æŒ‡å—](https://modelcontextprotocol.io/quickstart/user)ã€‚
</Note>


## è¦æ±‚

Claude Desktop ä¼ ç»Ÿä¸Šè¦æ±‚ MCP æœåŠ¡å™¨ä½¿ç”¨ STDIO ä¼ è¾“åœ¨æœ¬åœ°è¿è¡Œï¼Œå…¶ä¸­æ‚¨çš„æœåŠ¡å™¨é€šè¿‡æ ‡å‡†è¾“å…¥/è¾“å‡ºè€Œä¸æ˜¯ HTTP ä¸ Claude é€šä¿¡ã€‚ä½†æ˜¯ï¼ŒæŸäº›è®¡åˆ’çš„ç”¨æˆ·ç°åœ¨ä¹Ÿå¯ä»¥è®¿é—®è¿œç¨‹æœåŠ¡å™¨æ”¯æŒã€‚

<Tip>
å¦‚æœä½ æ²¡æœ‰è¿œç¨‹æœåŠ¡å™¨æ”¯æŒæˆ–ä¸éœ€è¦è¿æ¥è¿œç¨‹æœåŠ¡å™¨, ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªé€šè¿‡**STDIO**åœ¨æœ¬åœ°è¿è¡Œçš„**ä»£ç†æœåŠ¡å™¨**ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°è¿œç¨‹çš„HTTPæœåŠ¡å™¨ã€‚ è¯·å‚è§ä¸‹æ–¹çš„ [ä»£ç†æœåŠ¡å™¨](#proxy-servers) éƒ¨åˆ†ã€‚
</Tip>

## åˆ›å»ºæœåŠ¡å™¨

æœ¬æŒ‡å—ä¸­çš„ç¤ºä¾‹å°†ä½¿ç”¨ä»¥ä¸‹ç®€å•çš„æ·éª°å­æœåŠ¡å™¨ï¼Œä¿å­˜ä¸º `server.py`ã€‚

```python server.py
import random
from fastmcp import FastMCP

mcp = FastMCP(name="éª°å­æŠ•æ·å™¨")

@mcp.tool
def roll_dice(n_dice: int) -> list[int]:
    """æ· `n_dice` ä¸ªå…­é¢éª°å­ï¼Œå¹¶è¿”å›ç»“æœã€‚"""
    return [random.randint(1, 6) for _ in range(n_dice)]

if __name__ == "__main__":
    mcp.run()
```

## å®‰è£…æœåŠ¡å™¨

### FastMCP CLI
<VersionBadge version="2.10.3" />

åœ¨ Claude Desktop ä¸­å®‰è£… FastMCP æœåŠ¡å™¨çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ `fastmcp install claude-desktop` å‘½ä»¤ã€‚è¿™ä¼šè‡ªåŠ¨å¤„ç†é…ç½®å’Œä¾èµ–ç®¡ç†ã€‚

<Tip>
åœ¨ç‰ˆæœ¬ 2.10.3 ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œ `fastmcp install <path>` è€Œä¸æŒ‡å®šå®¢æˆ·ç«¯æ¥ç®¡ç† Claude Desktopã€‚
</Tip>

```bash
fastmcp install claude-desktop server.py
```

å®‰è£…å‘½ä»¤æ”¯æŒä¸ `run` å‘½ä»¤ç›¸åŒçš„ `file.py:object` è¡¨ç¤ºæ³•ã€‚å¦‚æœæœªæŒ‡å®šå¯¹è±¡ï¼Œå®ƒå°†è‡ªåŠ¨åœ¨æ‚¨çš„æ–‡ä»¶ä¸­æŸ¥æ‰¾åä¸º `mcp`ã€`server` æˆ– `app` çš„ FastMCP æœåŠ¡å™¨å¯¹è±¡ï¼š

```bash
# å¦‚æœæ‚¨çš„æœåŠ¡å™¨å¯¹è±¡åä¸º 'mcp'ï¼Œè¿™äº›æ˜¯ç­‰æ•ˆçš„
fastmcp install claude-desktop server.py
fastmcp install claude-desktop server.py:mcp

# å¦‚æœæ‚¨çš„æœåŠ¡å™¨æœ‰ä¸åŒçš„åç§°ï¼Œè¯·ä½¿ç”¨æ˜¾å¼å¯¹è±¡å
fastmcp install claude-desktop server.py:my_custom_server
```

å®‰è£…åï¼Œå®Œå…¨é‡å¯ Claude Desktopã€‚æ‚¨åº”è¯¥åœ¨è¾“å…¥æ¡†çš„å·¦ä¸‹è§’çœ‹åˆ°ä¸€ä¸ªé”¤å­å›¾æ ‡ï¼ˆğŸ”¨ï¼‰ï¼Œè¡¨ç¤º MCP å·¥å…·å¯ç”¨ã€‚

#### ä¾èµ–

FastMCP åœ¨ Claude Desktop ä¸­å®‰è£…æ—¶æä¾›äº†å‡ ç§ç®¡ç†æœåŠ¡å™¨ä¾èµ–çš„æ–¹æ³•ï¼š

**å•ä¸ªåŒ…**ï¼šä½¿ç”¨ `--with` æ ‡å¿—æŒ‡å®šæ‚¨çš„æœåŠ¡å™¨éœ€è¦çš„åŒ…ã€‚æ‚¨å¯ä»¥å¤šæ¬¡ä½¿ç”¨æ­¤æ ‡å¿—ï¼š

```bash
fastmcp install claude-desktop server.py --with pandas --with requests
```

**è¦æ±‚æ–‡ä»¶**ï¼šå¦‚æœæ‚¨æœ‰ä¸€ä¸ªåˆ—å‡ºæ‰€æœ‰ä¾èµ–çš„ `requirements.txt` æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ `--with-requirements` ä¸€æ¬¡æ€§å®‰è£…å®ƒä»¬ï¼š

```bash
fastmcp install claude-desktop server.py --with-requirements requirements.txt
```

**å¯ç¼–è¾‘åŒ…**ï¼šå¯¹äºæ­£åœ¨å¼€å‘çš„æœ¬åœ°åŒ…ï¼Œä½¿ç”¨ `--with-editable` ä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…å®ƒä»¬ï¼š

```bash
fastmcp install claude-desktop server.py --with-editable ./my-local-package
```

æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸º `fastmcp.json` çš„é…ç½®æ–‡ä»¶ï¼ˆæ¨èä½¿ç”¨ï¼‰ï¼š

```json fastmcp.json
{
  "$schema": "https://gofastmcp.com/schemas/fastmcp_config/v1.json",
  "entrypoint": {
    "file": "server.py",
    "object": "mcp"
  },
  "environment": {
    "dependencies": ["pandas", "requests"]
  }
}
```


#### Python ç‰ˆæœ¬å’Œé¡¹ç›®ç›®å½•

FastMCP å…è®¸æ‚¨æ§åˆ¶æœåŠ¡å™¨çš„ Python ç¯å¢ƒï¼š

**Python ç‰ˆæœ¬**ï¼šä½¿ç”¨ `--python` æŒ‡å®šæ‚¨çš„æœåŠ¡å™¨åº”è¯¥ä½¿ç”¨çš„ Python ç‰ˆæœ¬ã€‚å½“æ‚¨çš„æœåŠ¡å™¨éœ€è¦ç‰¹å®š Python ç‰ˆæœ¬æ—¶ï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ï¼š

```bash
fastmcp install claude-desktop server.py --python 3.11
```

**é¡¹ç›®ç›®å½•**ï¼šä½¿ç”¨ `--project` åœ¨ç‰¹å®šé¡¹ç›®ç›®å½•ä¸­è¿è¡Œæ‚¨çš„æœåŠ¡å™¨ã€‚è¿™ç¡®ä¿ `uv` å°†ä»è¯¥é¡¹ç›®ä¸­å‘ç°æ‰€æœ‰ `pyproject.toml`ã€`uv.toml` å’Œ `.python-version` æ–‡ä»¶ï¼š

```bash
fastmcp install claude-desktop server.py --project /path/to/my-project
```

å½“æ‚¨æŒ‡å®šé¡¹ç›®ç›®å½•æ—¶ï¼ŒæœåŠ¡å™¨ä¸­çš„æ‰€æœ‰ç›¸å¯¹è·¯å¾„å°†ä»è¯¥ç›®å½•è§£æï¼Œå¹¶ä½¿ç”¨é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒã€‚

#### ç¯å¢ƒå˜é‡

<Warning>
Claude Desktop åœ¨å®Œå…¨éš”ç¦»çš„ç¯å¢ƒä¸­è¿è¡ŒæœåŠ¡å™¨ï¼Œæ— æ³•è®¿é—®æ‚¨çš„ shell ç¯å¢ƒæˆ–æœ¬åœ°å®‰è£…çš„åº”ç”¨ç¨‹åºã€‚æ‚¨å¿…é¡»æ˜¾å¼ä¼ é€’æœåŠ¡å™¨éœ€è¦çš„ä»»ä½•ç¯å¢ƒå˜é‡ã€‚
</Warning>

å¦‚æœæ‚¨çš„æœåŠ¡å™¨éœ€è¦ç¯å¢ƒå˜é‡ï¼ˆå¦‚ API å¯†é’¥ï¼‰ï¼Œæ‚¨å¿…é¡»åŒ…å«å®ƒä»¬ï¼š

```bash
fastmcp install claude-desktop server.py --server-name "Weather Server" \
  --env API_KEY=your-api-key \
  --env DEBUG=true
```

æˆ–è€…ä» `.env` æ–‡ä»¶ä¸­åŠ è½½å®ƒä»¬ï¼š

```bash
fastmcp install claude-desktop server.py --server-name "Weather Server" --env-file .env
```
<Warning>
- **å¿…é¡»åœ¨ç³»ç»ŸPATHä¸­å®‰è£…å¹¶å¯ç”¨`uv`**. Claude Desktop è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„éš”ç¦»ç¯å¢ƒä¸­ï¼Œéœ€è¦`uv`æ¥ç®¡ç†ä¾èµ–.
- **åœ¨macOSä¸Šï¼Œæ¨èä½¿ç”¨Homebrewå…¨å±€å®‰è£…`uv`** è¿™æ ·Claude Desktopæ‰èƒ½æ£€æµ‹åˆ°å®ƒ: `brew install uv`ã€‚ ä½¿ç”¨å…¶ä»–æ–¹å¼å®‰è£… `uv` å¯èƒ½å¯¼è‡´Claude Desktopæ— æ³•è®¿é—®å®ƒã€‚
</Warning>


### æ‰‹åŠ¨é…ç½®

ä¸ºäº†æ›´å¥½åœ°æ§åˆ¶é…ç½®ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘ Claude Desktop çš„é…ç½®æ–‡ä»¶ã€‚æ‚¨å¯ä»¥ä» Claude çš„å¼€å‘è€…è®¾ç½®ä¸­æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œæˆ–åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°å®ƒï¼š
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªåŒ…å« `mcpServers` é”®çš„ JSON å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æ¯ä¸ª MCP æœåŠ¡å™¨çš„é…ç½®ã€‚

```json
{
  "mcpServers": {
    "dice-roller": {
      "command": "python",
      "args": ["path/to/your/server.py"]
    }
  }
}
```

æ›´æ–°é…ç½®æ–‡ä»¶åï¼Œå®Œå…¨é‡å¯ Claude Desktopã€‚æŸ¥æ‰¾é”¤å­å›¾æ ‡ï¼ˆğŸ”¨ï¼‰ä»¥ç¡®è®¤æ‚¨çš„æœåŠ¡å™¨å·²åŠ è½½ã€‚

#### ä¾èµ–é¡¹

å¦‚æœä½ çš„æœåŠ¡å™¨æœ‰ä¾èµ–é¡¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ `uv` æˆ–å…¶ä»–åŒ…ç®¡ç†å™¨æ¥é…ç½®ç¯å¢ƒã€‚


æ‰‹åŠ¨é…ç½®ä¾èµ–æ—¶ï¼Œå»ºè®®çš„æ–¹æ³•æ˜¯å°† `uv` ä¸ FastMCP ä¸€èµ·ä½¿ç”¨ã€‚é…ç½®ä½¿ç”¨ `uv run` æ¥åˆ›å»ºä¸€ä¸ªåŒ…å«æ‚¨æŒ‡å®šåŒ…çš„éš”ç¦»ç¯å¢ƒï¼š

```json
{
  "mcpServers": {
    "dice-roller": {
      "command": "uv",
      "args": [
        "run",
        "--with", "fastmcp",
        "--with", "pandas",
        "--with", "requests", 
        "fastmcp",
        "run",
        "path/to/your/server.py"
      ]
    }
  }
}
```

æ‚¨ä¹Ÿå¯ä»¥åœ¨é…ç½®ä¸­æ‰‹åŠ¨æŒ‡å®š Python ç‰ˆæœ¬å’Œé¡¹ç›®ç›®å½•ã€‚æ·»åŠ  `--python` æ¥ä½¿ç”¨ç‰¹å®šçš„ Python ç‰ˆæœ¬ï¼Œæˆ–è€… `--project` åœ¨é¡¹ç›®ç›®å½•ä¸­è¿è¡Œï¼š

```json
{
  "mcpServers": {
    "dice-roller": {
      "command": "uv",
      "args": [
        "run",
        "--python", "3.11",
        "--project", "/path/to/project",
        "--with", "fastmcp",
        "fastmcp",
        "run",
        "path/to/your/server.py"
      ]
    }
  }
}
```

å‚æ•°çš„é¡ºåºå¾ˆé‡è¦ï¼šPython ç‰ˆæœ¬å’Œé¡¹ç›®è®¾ç½®åœ¨åŒ…è§„æ ¼ä¹‹å‰ï¼Œè€ŒåŒ…è§„æ ¼åœ¨å®é™…è¦è¿è¡Œçš„å‘½ä»¤ä¹‹å‰ã€‚

<Warning>
- **å¿…é¡»åœ¨ç³»ç»ŸPATHä¸­å®‰è£…å¹¶å¯ç”¨`uv`**. Claude Desktop è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„éš”ç¦»ç¯å¢ƒä¸­ï¼Œéœ€è¦`uv`æ¥ç®¡ç†ä¾èµ–.
- **åœ¨macOSä¸Šï¼Œæ¨èä½¿ç”¨Homebrewå…¨å±€å®‰è£…`uv`** è¿™æ ·Claude Desktopæ‰èƒ½æ£€æµ‹åˆ°å®ƒ: `brew install uv`ã€‚ ä½¿ç”¨å…¶ä»–æ–¹å¼å®‰è£… `uv` å¯èƒ½å¯¼è‡´Claude Desktopæ— æ³•è®¿é—®å®ƒã€‚
</Warning>

#### ç¯å¢ƒå˜é‡

æ‚¨ä¹Ÿå¯ä»¥åœ¨é…ç½®ä¸­æŒ‡å®šç¯å¢ƒå˜é‡ï¼š

```json
{
  "mcpServers": {
    "weather-server": {
      "command": "python",
      "args": ["path/to/weather_server.py"],
      "env": {
        "API_KEY": "your-api-key",
        "DEBUG": "true"
      }
    }
  }
}
```
<Warning>
Claude Desktop åœ¨ä¸€ä¸ªå®Œå…¨éš”ç¦»çš„ç¯å¢ƒä¸­è¿è¡ŒæœåŠ¡å™¨ï¼Œæ— æ³•è®¿é—®ä½ çš„ shell ç¯å¢ƒæˆ–æœ¬åœ°å·²å®‰è£…çš„åº”ç”¨ç¨‹åºã€‚ä½ å¿…é¡»æ˜¾å¼ä¼ é€’æœåŠ¡å™¨æ‰€éœ€çš„ä»»ä½•ç¯å¢ƒå˜é‡ã€‚
</Warning>


## è¿œç¨‹æœåŠ¡å™¨


Claude Proã€Maxã€Team å’Œ Enterprise è®¡åˆ’çš„ç”¨æˆ·å¯ä»¥é€šè¿‡é›†æˆè·å¾—ä¸€æµçš„è¿œç¨‹æœåŠ¡å™¨æ”¯æŒã€‚å¯¹äºå…¶ä»–ç”¨æˆ·ï¼Œæˆ–ä½œä¸ºæ›¿ä»£æ–¹æ³•ï¼ŒFastMCP å¯ä»¥åˆ›å»ºä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°è¿œç¨‹ HTTP æœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥åœ¨ Claude Desktop ä¸­å®‰è£…ä»£ç†æœåŠ¡å™¨ã€‚

åˆ›å»ºä¸€ä¸ªè¿æ¥åˆ°è¿œç¨‹ HTTP æœåŠ¡å™¨çš„ä»£ç†æœåŠ¡å™¨ï¼š

```python proxy_server.py
from fastmcp import FastMCP

# åˆ›å»ºä¸€ä¸ªåˆ°è¿œç¨‹æœåŠ¡å™¨çš„ä»£ç†
proxy = FastMCP.as_proxy(
    "https://example.com/mcp/sse", 
    name="Remote Server Proxy"
)

if __name__ == "__main__":
    proxy.run()  # é€šè¿‡ STDIO ä¸º Claude Desktop è¿è¡Œ
```

### èº«ä»½éªŒè¯

å¯¹äºç»è¿‡èº«ä»½éªŒè¯çš„è¿œç¨‹æœåŠ¡å™¨ï¼Œè¯·æŒ‰ç…§[å®¢æˆ·ç«¯èº«ä»½éªŒè¯æ–‡æ¡£](/zh/clients/auth/bearer)ä¸­çš„æŒ‡å¯¼åˆ›å»ºç»è¿‡èº«ä»½éªŒè¯çš„å®¢æˆ·ç«¯ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ä»£ç†ï¼š

```python auth_proxy_server.py {7}
from fastmcp import FastMCP, Client
from fastmcp.client.auth import BearerAuth

# åˆ›å»ºç»è¿‡èº«ä»½éªŒè¯çš„å®¢æˆ·ç«¯
client = Client(
    "https://api.example.com/mcp/sse",
    auth=BearerAuth(token="your-access-token")
)

# ä½¿ç”¨ç»è¿‡èº«ä»½éªŒè¯çš„å®¢æˆ·ç«¯åˆ›å»ºä»£ç†
proxy = FastMCP.as_proxy(client, name="Authenticated Proxy")

if __name__ == "__main__":
    proxy.run()
```

