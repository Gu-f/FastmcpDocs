---
title: Descope ğŸ¤ FastMCP
sidebarTitle: Descope
description: ä½¿ç”¨ Descope ä¿æŠ¤æ‚¨çš„ FastMCP æœåŠ¡å™¨
icon: shield-check
tag: NEW
---

import { VersionBadge } from "/snippets/version-badge.mdx"

<VersionBadge version="2.12.4" />

æœ¬æŒ‡å—å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ [**Descope**](https://www.descope.com) ä¿æŠ¤æ‚¨çš„ FastMCP æœåŠ¡å™¨ï¼ŒDescope æ˜¯ä¸€ä¸ªå®Œæ•´çš„èº«ä»½éªŒè¯å’Œç”¨æˆ·ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚æ­¤é›†æˆä½¿ç”¨ [**è¿œç¨‹ OAuth**](/zh/servers/auth/remote-oauth) æ¨¡å¼ï¼Œå…¶ä¸­ Descope å¤„ç†ç”¨æˆ·ç™»å½•ï¼Œæ‚¨çš„ FastMCP æœåŠ¡å™¨éªŒè¯ä»¤ç‰Œã€‚

## é…ç½®

### å‰ææ¡ä»¶

å¼€å§‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦ï¼š
1. [æ³¨å†Œ](https://www.descope.com/sign-up)ä¸€ä¸ªæ°¸ä¹…å…è´¹çš„ Descope è´¦æˆ·
2. ä» [Descope æ§åˆ¶å°](https://app.descope.com/settings/project)è·å–æ‚¨çš„ **é¡¹ç›® ID**
3. æ‚¨çš„ FastMCP æœåŠ¡å™¨ URLï¼ˆå¼€å‘ç¯å¢ƒå¯ä»¥æ˜¯ localhostï¼Œä¾‹å¦‚ `http://localhost:3000`ï¼‰

### æ­¥éª¤ 1ï¼šé…ç½® Descope

<Steps>
<Step title="å¯ç”¨åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ">
    1. è½¬åˆ° Descope æ§åˆ¶å°çš„[å…¥ç«™åº”ç”¨ç¨‹åºé¡µé¢](https://app.descope.com/apps/inbound)
    2. ç‚¹å‡» **DCR è®¾ç½®**
    3. å¯ç”¨ **åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ (DCR)**
    4. å®šä¹‰å…è®¸çš„ä½œç”¨åŸŸ

    <Warning>
    FastMCP å®¢æˆ·ç«¯éœ€è¦ DCR æ‰èƒ½è‡ªåŠ¨å‘æ‚¨çš„èº«ä»½éªŒè¯æœåŠ¡å™¨æ³¨å†Œã€‚
    </Warning>
</Step>

<Step title="è®°ä½æ‚¨çš„é¡¹ç›® ID">
    ä»[é¡¹ç›®è®¾ç½®](https://app.descope.com/settings/project)ä¿å­˜æ‚¨çš„é¡¹ç›® IDï¼š
    ```
    é¡¹ç›® ID: P2abc...123
    ```
</Step>
</Steps>

### æ­¥éª¤ 2ï¼šç¯å¢ƒè®¾ç½®

ä½¿ç”¨æ‚¨çš„ Descope é…ç½®åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
DESCOPE_PROJECT_ID=P2abc...123      # æ‚¨çš„ Descope é¡¹ç›® ID
DESCOPE_BASE_URL=https://api.descope.com   # Descope API URL
SERVER_URL=http://localhost:3000     # æ‚¨çš„æœåŠ¡å™¨åŸºç¡€ URL
```

<Note>
æ‚¨å¯ä»¥åœ¨[å¤šåŒºåŸŸæ”¯æŒæŒ‡å—](https://docs.descope.com/management/project-settings/multi-regional)ä¸­æ‰¾åˆ°æ‚¨é¡¹ç›®çš„ Descope åŸºç¡€ URLã€‚
</Note>

### æ­¥éª¤ 3ï¼šFastMCP é…ç½®

åˆ›å»ºæ‚¨çš„ FastMCP æœåŠ¡å™¨æ–‡ä»¶å¹¶ä½¿ç”¨ DescopeProvider è‡ªåŠ¨å¤„ç†æ‰€æœ‰ OAuth é›†æˆï¼š

```python server.py
from fastmcp import FastMCP
from fastmcp.server.auth.providers.descope import DescopeProvider

# DescopeProvider è‡ªåŠ¨å‘ç° Descope ç«¯ç‚¹
# å¹¶é…ç½® JWT ä»¤ç‰ŒéªŒè¯
auth_provider = DescopeProvider(
    project_id=DESCOPE_PROJECT_ID,        # æ‚¨çš„ Descope é¡¹ç›® ID
    base_url=SERVER_URL,                  # æ‚¨çš„æœåŠ¡å™¨å…¬å…± URL
    descope_base_url=DESCOPE_BASE_URL,    # Descope API åŸºç¡€ URL
)

# ä½¿ç”¨èº«ä»½éªŒè¯åˆ›å»º FastMCP æœåŠ¡å™¨
mcp = FastMCP(name="My Descope Protected Server", auth=auth_provider)

```

## æµ‹è¯•

è¦æµ‹è¯•æ‚¨çš„æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `fastmcp` CLI åœ¨æœ¬åœ°è¿è¡Œå®ƒã€‚å‡è®¾æ‚¨å·²å°†ä¸Šè¿°ä»£ç ä¿å­˜åˆ° `server.py`ï¼ˆåœ¨æ›¿æ¢ `project_id`ã€`base_url` å’Œ `descope_base_url` ä¸ºæ‚¨çš„å®é™…å€¼åï¼ï¼‰ï¼Œæ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
fastmcp run server.py --transport http --port 8000
```

ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ FastMCP å®¢æˆ·ç«¯æµ‹è¯•åœ¨èº«ä»½éªŒè¯åå¯ä»¥è®¿é—®æ‚¨çš„æœåŠ¡å™¨ï¼š

```python
from fastmcp import Client
import asyncio

async def main():
    async with Client("http://localhost:8000/mcp/", auth="oauth") as client:
        assert await client.ping()

if __name__ == "__main__":
    asyncio.run(main())
```

## ç¯å¢ƒå˜é‡

å¯¹äºç”Ÿäº§éƒ¨ç½²ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡è€Œä¸æ˜¯ç¡¬ç¼–ç å‡­æ®ã€‚

### æä¾›è€…é€‰æ‹©

è®¾ç½®æ­¤ç¯å¢ƒå˜é‡å…è®¸è‡ªåŠ¨ä½¿ç”¨ Descope æä¾›è€…ï¼Œè€Œæ— éœ€åœ¨ä»£ç ä¸­æ˜¾å¼å®ä¾‹åŒ–å®ƒã€‚

<Card>
<ParamField path="FASTMCP_SERVER_AUTH" default="Not set">
è®¾ç½®ä¸º `fastmcp.server.auth.providers.descope.DescopeProvider` ä»¥ä½¿ç”¨ Descope èº«ä»½éªŒè¯ã€‚
</ParamField>
</Card>

### Descope ç‰¹å®šé…ç½®

è¿™äº›ç¯å¢ƒå˜é‡ä¸º Descope æä¾›è€…æä¾›é»˜è®¤å€¼ï¼Œæ— è®ºæ˜¯æ‰‹åŠ¨å®ä¾‹åŒ–è¿˜æ˜¯é€šè¿‡ `FASTMCP_SERVER_AUTH` é…ç½®ã€‚

<Card>
<ParamField path="FASTMCP_SERVER_AUTH_DESCOPEPROVIDER_PROJECT_ID" required>
æ‚¨ä» [Descope æ§åˆ¶å°](https://app.descope.com/settings/project)è·å–çš„ Descope é¡¹ç›® ID
</ParamField>

<ParamField path="FASTMCP_SERVER_AUTH_DESCOPEPROVIDER_BASE_URL" required>
æ‚¨çš„ FastMCP æœåŠ¡å™¨çš„å…¬å…± URLï¼ˆä¾‹å¦‚ï¼Œ`https://your-server.com` æˆ–å¼€å‘ç¯å¢ƒä¸º `http://localhost:8000`ï¼‰
</ParamField>

<ParamField path="FASTMCP_SERVER_AUTH_DESCOPEPROVIDER_DESCOPE_BASE_URL" default="https://api.descope.com">
æ‚¨çš„[åŒºåŸŸ/ç¯å¢ƒ](https://docs.descope.com/management/project-settings/multi-regional)çš„ Descope API åŸºç¡€ URL
</ParamField>
</Card>

Example `.env` file:
```bash
# ä½¿ç”¨ Descope æä¾›è€…
FASTMCP_SERVER_AUTH=fastmcp.server.auth.providers.descope.DescopeProvider

# Descope é…ç½®
FASTMCP_SERVER_AUTH_DESCOPEPROVIDER_PROJECT_ID=P2abc...123
FASTMCP_SERVER_AUTH_DESCOPEPROVIDER_BASE_URL=https://your-server.com
FASTMCP_SERVER_AUTH_DESCOPEPROVIDER_DESCOPE_BASE_URL=https://api.descope.com
```

With environment variables set, your server code simplifies to:

```python server.py
from fastmcp import FastMCP

# èº«ä»½éªŒè¯è‡ªåŠ¨ä»ç¯å¢ƒä¸­é…ç½®
mcp = FastMCP(name="My Descope Protected Server")
```