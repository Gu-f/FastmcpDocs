---
title: Claude Code ğŸ¤ FastMCP
sidebarTitle: Claude Code
description: åœ¨ Claude Code ä¸­å®‰è£…å’Œä½¿ç”¨ FastMCP æœåŠ¡å™¨
icon: message-smile
---

import { VersionBadge } from "/snippets/version-badge.mdx"
import { LocalFocusTip } from "/snippets/local-focus-zh.mdx"

<LocalFocusTip />

Claude Code é€šè¿‡åŒ…æ‹¬ STDIOã€SSE å’Œ HTTP åœ¨å†…çš„å¤šç§ä¼ è¾“æ–¹æ³•æ”¯æŒ MCP æœåŠ¡å™¨ï¼Œå…è®¸æ‚¨ä½¿ç”¨ FastMCP æœåŠ¡å™¨çš„è‡ªå®šä¹‰å·¥å…·ã€èµ„æºå’Œæç¤ºæ¥æ‰©å±• Claude çš„åŠŸèƒ½ã€‚

## è¦æ±‚

æ­¤é›†æˆä½¿ç”¨ STDIO ä¼ è¾“åœ¨æœ¬åœ°è¿è¡Œæ‚¨çš„ FastMCP æœåŠ¡å™¨ã€‚å¯¹äºè¿œç¨‹éƒ¨ç½²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ HTTP æˆ– SSE ä¼ è¾“è¿è¡Œæ‚¨çš„ FastMCP æœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨ Claude Code çš„å†…ç½® MCP ç®¡ç†å‘½ä»¤ç›´æ¥é…ç½®å®ƒã€‚

## åˆ›å»ºæœåŠ¡å™¨

æœ¬æŒ‡å—ä¸­çš„ç¤ºä¾‹å°†ä½¿ç”¨ä»¥ä¸‹ç®€å•çš„æ·éª°å­æœåŠ¡å™¨ï¼Œä¿å­˜ä¸º `server.py`ã€‚

```python server.py
import random
from fastmcp import FastMCP

mcp = FastMCP(name="éª°å­æŠ•æ·å™¨")

@mcp.tool
def roll_dice(n_dice: int) -> list[int]:
    """æ· `n_dice` ä¸ªå…­é¢éª°å­ï¼Œå¹¶è¿”å›ç»“æœã€‚"""
    return [random.randint(1, 6) for _ in range(n_dice)]

if __name__ == "__main__":
    mcp.run()
```

## å®‰è£…æœåŠ¡å™¨

### FastMCP CLI
<VersionBadge version="2.10.3" />

åœ¨ Claude Code ä¸­å®‰è£… FastMCP æœåŠ¡å™¨çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ `fastmcp install claude-code` å‘½ä»¤ã€‚è¿™ä¼šè‡ªåŠ¨å¤„ç†é…ç½®ã€ä¾èµ–ç®¡ç†ï¼Œå¹¶è°ƒç”¨ Claude Code çš„å†…ç½® MCP ç®¡ç†ç³»ç»Ÿã€‚

```bash
fastmcp install claude-code server.py
```

å®‰è£…å‘½ä»¤æ”¯æŒä¸ `run` å‘½ä»¤ç›¸åŒçš„ `file.py:object` è¡¨ç¤ºæ³•ã€‚å¦‚æœæœªæŒ‡å®šå¯¹è±¡ï¼Œå®ƒå°†è‡ªåŠ¨åœ¨æ‚¨çš„æ–‡ä»¶ä¸­æŸ¥æ‰¾åä¸º `mcp`ã€`server` æˆ– `app` çš„ FastMCP æœåŠ¡å™¨å¯¹è±¡ï¼š

```bash
# å¦‚æœæ‚¨çš„æœåŠ¡å™¨å¯¹è±¡åä¸ºâ€œmcpâ€ï¼Œé‚£ä¹ˆè¿™ä¸¤è€…å°±æ˜¯ç­‰åŒçš„ã€‚
fastmcp install claude-code server.py
fastmcp install claude-code server.py:mcp

# å¦‚æœæ‚¨çš„æœåŠ¡å™¨æœ‰åˆ«åï¼Œè¯·ä½¿ç”¨æ˜ç¡®çš„æœåŠ¡å™¨åç§°ã€‚
fastmcp install claude-code server.py:my_custom_server
```

è¯¥å‘½ä»¤å°†ä½¿ç”¨ Claude Code çš„ `claude mcp add` å‘½ä»¤è‡ªåŠ¨é…ç½®æœåŠ¡å™¨ã€‚

#### ä¾èµ–

FastMCP ä¸ºæ‚¨çš„ Claude Code æœåŠ¡å™¨æä¾›çµæ´»çš„ä¾èµ–ç®¡ç†é€‰é¡¹ï¼š

**å•ä¸ªåŒ…**ï¼šä½¿ç”¨ `--with` æ ‡å¿—æŒ‡å®šæ‚¨çš„æœåŠ¡å™¨éœ€è¦çš„åŒ…ã€‚æ‚¨å¯ä»¥å¤šæ¬¡ä½¿ç”¨æ­¤æ ‡å¿—ï¼š

```bash
fastmcp install claude-code server.py --with pandas --with requests
```

**è¦æ±‚æ–‡ä»¶**ï¼šå¦‚æœæ‚¨ç»´æŠ¤ä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¾èµ–çš„ `requirements.txt` æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ `--with-requirements` æ¥å®‰è£…å®ƒä»¬ï¼š

```bash
fastmcp install claude-code server.py --with-requirements requirements.txt
```

**å¯ç¼–è¾‘åŒ…**ï¼šå¯¹äºæ­£åœ¨å¼€å‘çš„æœ¬åœ°åŒ…ï¼Œä½¿ç”¨ `--with-editable` ä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…å®ƒä»¬ï¼š

```bash
fastmcp install claude-code server.py --with-editable ./my-local-package
```

æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸º `fastmcp.json` çš„é…ç½®æ–‡ä»¶ï¼ˆæ¨èä½¿ç”¨ï¼‰ï¼š

```json fastmcp.json
{
  "$schema": "https://gofastmcp.com/schemas/fastmcp_config/v1.json",
  "entrypoint": {
    "file": "server.py",
    "object": "mcp"
  },
  "environment": {
    "dependencies": ["pandas", "requests"]
  }
}
```


#### Python ç‰ˆæœ¬å’Œé¡¹ç›®é…ç½®

ä½¿ç”¨è¿™äº›é€‰é¡¹æ§åˆ¶æ‚¨æœåŠ¡å™¨çš„ Python ç¯å¢ƒï¼š

**Python ç‰ˆæœ¬**ï¼šä½¿ç”¨ `--python` æŒ‡å®šæ‚¨çš„æœåŠ¡å™¨éœ€è¦çš„ Python ç‰ˆæœ¬ã€‚å½“æ‚¨çš„æœåŠ¡å™¨éœ€è¦ç‰¹å®šçš„ Python åŠŸèƒ½æ—¶ï¼Œè¿™å¯ä»¥ç¡®ä¿å…¼å®¹æ€§ï¼š

```bash
fastmcp install claude-code server.py --python 3.11
```

**é¡¹ç›®ç›®å½•**ï¼šä½¿ç”¨ `--project` åœ¨ç‰¹å®šçš„é¡¹ç›®ä¸Šä¸‹æ–‡ä¸­è¿è¡Œæ‚¨çš„æœåŠ¡å™¨ã€‚è¿™å‘Šè¯‰ `uv` ä½¿ç”¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶å’Œè™šæ‹Ÿç¯å¢ƒï¼š

```bash
fastmcp install claude-code server.py --project /path/to/my-project
```

#### ç¯å¢ƒå˜é‡

å¦‚æœæ‚¨çš„æœåŠ¡å™¨éœ€è¦ç¯å¢ƒå˜é‡ï¼ˆå¦‚ API å¯†é’¥ï¼‰ï¼Œæ‚¨å¿…é¡»åŒ…å«å®ƒä»¬ï¼š

```bash
fastmcp install claude-code server.py --server-name "Weather Server" \
  --env API_KEY=your-api-key \
  --env DEBUG=true
```

æˆ–è€…ä» `.env` æ–‡ä»¶ä¸­åŠ è½½å®ƒä»¬ï¼š

```bash
fastmcp install claude-code server.py --server-name "Weather Server" --env-file .env
```

<Warning>
**å¿…é¡»å®‰è£… Claude Code**ã€‚é›†æˆåœ¨é»˜è®¤å®‰è£…ä½ç½®ï¼ˆ`~/.claude/local/claude`ï¼‰æŸ¥æ‰¾ Claude Code CLIï¼Œå¹¶ä½¿ç”¨ `claude mcp add` å‘½ä»¤æ¥æ³¨å†ŒæœåŠ¡å™¨ã€‚
</Warning>

### æ‰‹åŠ¨é…ç½®

ä¸ºäº†æ›´å¥½åœ°æ§åˆ¶é…ç½®ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨ä½¿ç”¨ Claude Code çš„å†…ç½® MCP ç®¡ç†å‘½ä»¤ã€‚è¿™è®©æ‚¨å¯ä»¥ç›´æ¥æ§åˆ¶æœåŠ¡å™¨çš„å¯åŠ¨æ–¹å¼ï¼š

```bash
# æ·»åŠ ä¸€å°å…·æœ‰è‡ªå®šä¹‰é…ç½®çš„æœåŠ¡å™¨
claude mcp add dice-roller -- uv run --with fastmcp fastmcp run server.py

# ä½¿ç”¨ç¯å¢ƒå˜é‡æ·»åŠ 
claude mcp add weather-server -e API_KEY=secret -e DEBUG=true -- uv run --with fastmcp fastmcp run server.py

# é™„åŠ å…·æœ‰ç‰¹å®šèŒƒå›´ï¼ˆæœ¬åœ°ã€ç”¨æˆ·æˆ–é¡¹ç›®ï¼‰çš„é€‰é¡¹
claude mcp add my-server --scope user -- uv run --with fastmcp fastmcp run server.py
```

æ‚¨ä¹Ÿå¯ä»¥åœ¨ Claude Code å‘½ä»¤ä¸­æ‰‹åŠ¨æŒ‡å®š Python ç‰ˆæœ¬å’Œé¡¹ç›®ç›®å½•ï¼š

```bash
# ä½¿ç”¨ç‰¹å®šçš„ Python ç‰ˆæœ¬
claude mcp add ml-server -- uv run --python 3.11 --with fastmcp fastmcp run server.py

# åœ¨é¡¹ç›®ç›®å½•å†…
claude mcp add project-server -- uv run --project /path/to/project --with fastmcp fastmcp run server.py
```

## ä½¿ç”¨æœåŠ¡å™¨

ä¸€æ—¦æ‚¨çš„æœåŠ¡å™¨å®‰è£…å®Œæˆï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹åœ¨ Claude Code ä¸­ä½¿ç”¨æ‚¨çš„ FastMCP æœåŠ¡å™¨ã€‚

å°è¯•é—® Claude è¿™æ ·çš„é—®é¢˜ï¼š

> "ä¸ºæˆ‘æŠ•å‡ ä¸ªéª°å­"

Claude å°†è‡ªåŠ¨æ£€æµ‹æ‚¨çš„ `roll_dice` å·¥å…·å¹¶ä½¿ç”¨å®ƒæ¥æ»¡è¶³æ‚¨çš„è¯·æ±‚ï¼Œè¿”å›ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š

> æˆ‘ä¸ºæ‚¨æŠ•ä¸€äº›éª°å­ï¼è¿™æ˜¯æ‚¨çš„ç»“æœï¼š[4, 2, 6]
> 
> æ‚¨æŠ•äº†ä¸‰ä¸ªéª°å­ï¼Œå¾—åˆ°äº† 4ã€2 å’Œ 6ï¼

Claude Code ç°åœ¨å¯ä»¥è®¿é—®æ‚¨åœ¨ FastMCP æœåŠ¡å™¨ä¸­å®šä¹‰çš„æ‰€æœ‰å·¥å…·ã€èµ„æºå’Œæç¤ºã€‚

å¦‚æœæ‚¨çš„æœåŠ¡å™¨æä¾›èµ„æºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `@server:protocol://resource/path` æ ¼å¼çš„ `@` æåŠæ¥å¼•ç”¨å®ƒä»¬ã€‚å¦‚æœæ‚¨çš„æœåŠ¡å™¨æä¾›æç¤ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `/mcp__servername__promptname` ä½œä¸ºæ—œçº¿å‘½ä»¤æ¥ä½¿ç”¨å®ƒä»¬ã€‚