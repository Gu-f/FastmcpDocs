---
title: Gemini CLI ğŸ¤ FastMCP
sidebarTitle: Gemini CLI
description: åœ¨ Gemini CLI ä¸­å®‰è£…å’Œä½¿ç”¨ FastMCP æœåŠ¡å™¨
icon: message-smile
tag: NEW
---

import { VersionBadge } from "/snippets/version-badge.mdx"
import { LocalFocusTip } from "/snippets/local-focus-zh.mdx"

<LocalFocusTip />

Gemini CLI é€šè¿‡å¤šç§ä¼ è¾“æ–¹æ³•ï¼ˆåŒ…æ‹¬ STDIOã€SSE å’Œ HTTPï¼‰æ”¯æŒ MCP æœåŠ¡å™¨ï¼Œå…è®¸æ‚¨ä½¿ç”¨æ¥è‡ª FastMCP æœåŠ¡å™¨çš„è‡ªå®šä¹‰å·¥å…·ã€èµ„æºå’Œæç¤ºæ‰©å±• Gemini çš„åŠŸèƒ½ã€‚

## éœ€æ±‚

æ­¤é›†æˆä½¿ç”¨ STDIO ä¼ è¾“åœ¨æœ¬åœ°è¿è¡Œæ‚¨çš„ FastMCP æœåŠ¡å™¨ã€‚å¯¹äºè¿œç¨‹éƒ¨ç½²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ HTTP æˆ– SSE ä¼ è¾“è¿è¡Œ FastMCP æœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨ Gemini CLI çš„å†…ç½® MCP ç®¡ç†å‘½ä»¤ç›´æ¥é…ç½®å®ƒã€‚

## åˆ›å»ºæœåŠ¡å™¨

æœ¬æŒ‡å—ä¸­çš„ç¤ºä¾‹å°†ä½¿ç”¨ä»¥ä¸‹ç®€å•çš„æŠ•éª°å­æœåŠ¡å™¨ï¼Œä¿å­˜ä¸º `server.py`ã€‚

```python server.py
import random
from fastmcp import FastMCP

mcp = FastMCP(name="Dice Roller")

@mcp.tool
def roll_dice(n_dice: int) -> list[int]:
    """æŠ•å‡º `n_dice` ä¸ª 6 é¢éª°å­å¹¶è¿”å›ç»“æœã€‚"""
    return [random.randint(1, 6) for _ in range(n_dice)]

if __name__ == "__main__":
    mcp.run()
```

## å®‰è£…æœåŠ¡å™¨

### FastMCP CLI
<VersionBadge version="2.13.0" />

åœ¨ Gemini CLI ä¸­å®‰è£… FastMCP æœåŠ¡å™¨çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ `fastmcp install gemini-cli` å‘½ä»¤ã€‚è¿™è‡ªåŠ¨å¤„ç†é…ç½®ã€ä¾èµ–ç®¡ç†ï¼Œå¹¶è°ƒç”¨ Gemini CLI çš„å†…ç½® MCP ç®¡ç†ç³»ç»Ÿã€‚

```bash
fastmcp install gemini-cli server.py
```

å®‰è£…å‘½ä»¤æ”¯æŒä¸ `run` å‘½ä»¤ç›¸åŒçš„ `file.py:object` è®°å·æ³•ã€‚å¦‚æœæœªæŒ‡å®šå¯¹è±¡ï¼Œå®ƒå°†è‡ªåŠ¨åœ¨æ‚¨çš„æ–‡ä»¶ä¸­æŸ¥æ‰¾åä¸º `mcp`ã€`server` æˆ– `app` çš„ FastMCP æœåŠ¡å™¨å¯¹è±¡ï¼š

```bash
# å¦‚æœæ‚¨çš„æœåŠ¡å™¨å¯¹è±¡åä¸º 'mcp'ï¼Œè¿™äº›æ˜¯ç­‰ä»·çš„
fastmcp install gemini-cli server.py
fastmcp install gemini-cli server.py:mcp

# å¦‚æœæ‚¨çš„æœåŠ¡å™¨æœ‰ä¸åŒçš„åç§°ï¼Œè¯·ä½¿ç”¨æ˜¾å¼å¯¹è±¡åç§°
fastmcp install gemini-cli server.py:my_custom_server
```

è¯¥å‘½ä»¤å°†ä½¿ç”¨ Gemini CLI çš„ `gemini mcp add` å‘½ä»¤è‡ªåŠ¨é…ç½®æœåŠ¡å™¨ã€‚

#### ä¾èµ–

FastMCP ä¸ºæ‚¨çš„ Gemini CLI æœåŠ¡å™¨æä¾›çµæ´»çš„ä¾èµ–ç®¡ç†é€‰é¡¹ï¼š

**å•ä¸ªåŒ…**: ä½¿ç”¨ `--with` æ ‡å¿—æŒ‡å®šæ‚¨çš„æœåŠ¡å™¨éœ€è¦çš„åŒ…ã€‚æ‚¨å¯ä»¥å¤šæ¬¡ä½¿ç”¨æ­¤æ ‡å¿—ï¼š

```bash
fastmcp install gemini-cli server.py --with pandas --with requests
```

**éœ€æ±‚æ–‡ä»¶**: å¦‚æœæ‚¨ç»´æŠ¤ä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¾èµ–çš„ `requirements.txt` æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ `--with-requirements` æ¥å®‰è£…å®ƒä»¬ï¼š

```bash
fastmcp install gemini-cli server.py --with-requirements requirements.txt
```

**å¯ç¼–è¾‘åŒ…**: å¯¹äºæ­£åœ¨å¼€å‘çš„æœ¬åœ°åŒ…ï¼Œè¯·ä½¿ç”¨ `--with-editable` ä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…å®ƒä»¬ï¼š

```bash
fastmcp install gemini-cli server.py --with-editable ./my-local-package
```

æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `fastmcp.json` é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰ï¼š

```json fastmcp.json
{
  "$schema": "https://gofastmcp.com/public/schemas/fastmcp.json/v1.json",
  "source": {
    "path": "server.py",
    "entrypoint": "mcp"
  },
  "environment": {
    "dependencies": ["pandas", "requests"]
  }
}
```


#### Python ç‰ˆæœ¬å’Œé¡¹ç›®é…ç½®

ä½¿ç”¨è¿™äº›é€‰é¡¹æ§åˆ¶æ‚¨æœåŠ¡å™¨çš„ Python ç¯å¢ƒï¼š

**Python ç‰ˆæœ¬**: ä½¿ç”¨ `--python` æŒ‡å®šæ‚¨çš„æœåŠ¡å™¨éœ€è¦çš„ Python ç‰ˆæœ¬ã€‚å½“æ‚¨çš„æœåŠ¡å™¨éœ€è¦ç‰¹å®šçš„ Python åŠŸèƒ½æ—¶ï¼Œè¿™ç¡®ä¿äº†å…¼å®¹æ€§ï¼š

```bash
fastmcp install gemini-cli server.py --python 3.11
```

**é¡¹ç›®ç›®å½•**: ä½¿ç”¨ `--project` åœ¨ç‰¹å®šé¡¹ç›®ä¸Šä¸‹æ–‡ä¸­è¿è¡Œæ‚¨çš„æœåŠ¡å™¨ã€‚è¿™å‘Šè¯‰ `uv` ä½¿ç”¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶å’Œè™šæ‹Ÿç¯å¢ƒï¼š

```bash
fastmcp install gemini-cli server.py --project /path/to/my-project
```

#### ç¯å¢ƒå˜é‡

å¦‚æœæ‚¨çš„æœåŠ¡å™¨éœ€è¦ç¯å¢ƒå˜é‡ï¼ˆå¦‚ API å¯†é’¥ï¼‰ï¼Œæ‚¨å¿…é¡»åŒ…å«å®ƒä»¬ï¼š

```bash
fastmcp install gemini-cli server.py --server-name "å¤©æ°”æœåŠ¡å™¨" \
  --env API_KEY=your-api-key \
  --env DEBUG=true
```

æˆ–è€…ä» `.env` æ–‡ä»¶ä¸­åŠ è½½å®ƒä»¬ï¼š

```bash
fastmcp install gemini-cli server.py --server-name "å¤©æ°”æœåŠ¡å™¨" --env-file .env
```

<Warning>
**å¿…é¡»å®‰è£… Gemini CLI**ã€‚è¯¥é›†æˆæŸ¥æ‰¾ Gemini CLI å¹¶ä½¿ç”¨ `gemini mcp add` å‘½ä»¤æ¥æ³¨å†ŒæœåŠ¡å™¨ã€‚
</Warning>

### æ‰‹åŠ¨é…ç½®

ä¸ºäº†æ›´å¥½åœ°æ§åˆ¶é…ç½®ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨ä½¿ç”¨ Gemini CLI çš„å†…ç½® MCP ç®¡ç†å‘½ä»¤ã€‚è¿™ç»™æ‚¨å¯¹æœåŠ¡å™¨å¯åŠ¨æ–¹å¼çš„ç›´æ¥æ§åˆ¶ï¼š

```bash
# æ·»åŠ å¸¦æœ‰è‡ªå®šä¹‰é…ç½®çš„æœåŠ¡å™¨
gemini mcp add dice-roller uv -- run --with fastmcp fastmcp run server.py

# æ·»åŠ å¸¦æœ‰ç¯å¢ƒå˜é‡çš„æœåŠ¡å™¨
gemini mcp add weather-server -e API_KEY=secret -e DEBUG=true uv -- run --with fastmcp fastmcp run server.py

# æ·»åŠ å¸¦æœ‰ç‰¹å®šä½œç”¨åŸŸï¼ˆç”¨æˆ·æˆ–é¡¹ç›®ï¼‰çš„æœåŠ¡å™¨
gemini mcp add my-server --scope user uv -- run --with fastmcp fastmcp run server.py
```

æ‚¨ä¹Ÿå¯ä»¥åœ¨ Gemini CLI å‘½ä»¤ä¸­æ‰‹åŠ¨æŒ‡å®š Python ç‰ˆæœ¬å’Œé¡¹ç›®ç›®å½•ï¼š

```bash
# ä½¿ç”¨ç‰¹å®š Python ç‰ˆæœ¬
gemini mcp add ml-server uv -- run --python 3.11 --with fastmcp fastmcp run server.py

# åœ¨é¡¹ç›®ç›®å½•å†…
gemini mcp add project-server uv -- run --project /path/to/project --with fastmcp fastmcp run server.py
```

## ä½¿ç”¨æœåŠ¡å™¨

ä¸€æ—¦æ‚¨çš„æœåŠ¡å™¨å®‰è£…å®Œæˆï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹åœ¨ Gemini CLI ä¸­ä½¿ç”¨æ‚¨çš„ FastMCP æœåŠ¡å™¨ã€‚

å°è¯•å‘ Gemini è¯¢é—®ä»¥ä¸‹å†…å®¹ï¼š

> "ä¸ºæˆ‘æŠ•ä¸€äº›éª°å­"

Gemini å°†è‡ªåŠ¨æ£€æµ‹æ‚¨çš„ `roll_dice` å·¥å…·å¹¶ä½¿ç”¨å®ƒæ¥å®Œæˆæ‚¨çš„è¯·æ±‚ã€‚

Gemini CLI ç°åœ¨å¯ä»¥è®¿é—®æ‚¨åœ¨ FastMCP æœåŠ¡å™¨ä¸­å®šä¹‰çš„æ‰€æœ‰å·¥å…·å’Œæç¤ºã€‚ 

å¦‚æœæ‚¨çš„æœåŠ¡å™¨æä¾›æç¤ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `/prompt_name` å°†å®ƒä»¬ä½œä¸ºæ–œæ å‘½ä»¤ä½¿ç”¨ã€‚
