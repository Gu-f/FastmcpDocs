---
title: Bearer Token 身份验证
sidebarTitle: Bearer 认证
description: 使用 Bearer token 对您的 FastMCP 客户端进行身份验证。
icon: key
---

import { VersionBadge } from "/snippets/version-badge.mdx"

<VersionBadge version="2.6.0" />

<Tip>
Bearer Token 身份验证仅适用于基于 HTTP 的传输方式。
</Tip>

您可以通过提供有效的访问令牌来配置 FastMCP 客户端使用 **bearer 身份验证**。这最适用于服务账户、长期有效的 API 密钥、CI/CD、单独管理身份验证的应用程序或其他非交互式身份验证方法。

Bearer token 是一个用于验证请求的 JSON Web Token (JWT)。它最常用于 HTTP 请求的 `Authorization` 标头中，使用 `Bearer` 方案：

```http
Authorization: Bearer <token>
```


## 客户端使用

使用预先存在的 Bearer token 的最直接方法是将其作为字符串提供给 `fastmcp.Client` 或传输实例的 `auth` 参数。FastMCP 将自动为 `Authorization` 标头和 bearer 方案正确格式化它。

<Tip>
如果您使用字符串令牌，请不要包含 `Bearer` 前缀。FastMCP 会为您添加。
</Tip>

```python {5}
from fastmcp import Client

async with Client(
    "https://fastmcp.cloud/mcp", 
    auth="<your-token>",
) as client:
    await client.ping()
```

您也可以将 Bearer token 提供给传输实例，例如 `StreamableHttpTransport` 或 `SSETransport`：

```python {6}
from fastmcp import Client
from fastmcp.client.transports import StreamableHttpTransport

transport = StreamableHttpTransport(
    "http://fastmcp.cloud/mcp", 
    auth="<your-token>",
)

async with Client(transport) as client:
    await client.ping()
```

## `BearerAuth` 辅助类

如果您希望更明确一些，不依赖 FastMCP 来转换您的字符串令牌，您可以自己使用 `BearerAuth` 类，它实现了 `httpx.Auth` 接口。

```python {6}
from fastmcp import Client
from fastmcp.client.auth import BearerAuth

async with Client(
    "https://fastmcp.cloud/mcp", 
    auth=BearerAuth(token="<your-token>"),
) as client:
    await client.ping()
```

## 自定义标头

如果 MCP 服务器期望自定义标头或令牌方案，您可以通过在传输上设置客户端的 `headers` 来手动设置，而不是使用 `auth` 参数：

```python {5}
from fastmcp import Client
from fastmcp.client.transports import StreamableHttpTransport

async with Client(
    transport=StreamableHttpTransport(
        "https://fastmcp.cloud/mcp", 
        headers={"X-API-Key": "<your-token>"},
    ),
) as client:
    await client.ping()
```
