---
title: 资源操作
sidebarTitle: 资源
description: 从 MCP 服务器访问静态和模板化资源。
icon: folder-open
---

import { VersionBadge } from '/snippets/version-badge.mdx'

<VersionBadge version="2.0.0" />

资源是由 MCP 服务器公开的数据源。它们可以是静态文件或根据参数生成内容的动态模板。

## 资源类型

MCP 服务器公开两种类型的资源：

- **静态资源**：通过 URI 访问的固定内容（例如配置文件、文档）
- **资源模板**：接受参数生成内容的动态资源（例如 API 端点、数据库查询）

## 列出资源

### 静态资源

使用 `list_resources()` 检索服务器上所有可用的静态资源：

```python
async with client:
    resources = await client.list_resources()
    # resources -> list[mcp.types.Resource]
    
    for resource in resources:
        print(f"资源 URI: {resource.uri}")
        print(f"名称: {resource.name}")
        print(f"描述: {resource.description}")
        print(f"MIME 类型: {resource.mimeType}")
        # 访问标签和其他元数据
        if hasattr(resource, '_meta') and resource._meta:
            fastmcp_meta = resource._meta.get('_fastmcp', {})
            print(f"标签: {fastmcp_meta.get('tags', [])}")
```

### 资源模板

使用 `list_resource_templates()` 检索可用的资源模板：

```python
async with client:
    templates = await client.list_resource_templates()
    # templates -> list[mcp.types.ResourceTemplate]
    
    for template in templates:
        print(f"模板 URI: {template.uriTemplate}")
        print(f"名称: {template.name}")
        print(f"描述: {template.description}")
        # 访问标签和其他元数据
        if hasattr(template, '_meta') and template._meta:
            fastmcp_meta = template._meta.get('_fastmcp', {})
            print(f"标签: {fastmcp_meta.get('tags', [])}")
```

### 按标签筛选

<VersionBadge version="2.11.0" />

您可以使用 `meta` 字段根据标签筛选资源：

```python
async with client:
    resources = await client.list_resources()
    
    # 按标签筛选资源
    config_resources = [
        resource for resource in resources 
        if hasattr(resource, '_meta') and resource._meta and
           resource._meta.get('_fastmcp', {}) and
           'config' in resource._meta.get('_fastmcp', {}).get('tags', [])
    ]
    
    print(f"找到 {len(config_resources)} 个配置资源")
```

<Note>
`_meta` 字段是标准 MCP 规范的一部分。FastMCP 服务器在 `_fastmcp` 命名空间内包含标签和其他元数据（例如 `_meta._fastmcp.tags`）以避免与用户定义的元数据冲突。这种行为可以通过服务器的 `include_fastmcp_meta` 设置控制 - 如果禁用，将不会包含 `_fastmcp` 命名空间。其他 MCP 服务器实现可能不提供此元数据结构。
</Note>

## 读取资源

### 静态资源

使用 URI 读取静态资源：

```python
async with client:
    # 读取静态资源
    content = await client.read_resource("file:///path/to/README.md")
    # content -> list[mcp.types.TextResourceContents | mcp.types.BlobResourceContents]
    
    # 访问文本内容
    if hasattr(content[0], 'text'):
        print(content[0].text)
    
    # 访问二进制内容
    if hasattr(content[0], 'blob'):
        print(f"二进制数据: {len(content[0].blob)} 字节")
```

### 资源模板

通过提供带参数的 URI 从资源模板读取：

```python
async with client:
    # 读取从模板生成的资源
    # 例如，像 "weather://{{city}}/current" 这样的模板
    weather_content = await client.read_resource("weather://london/current")
    
    # 访问生成的内容
    print(weather_content[0].text)  # 假设文本 JSON 响应
```

## 内容类型

资源可以返回不同的内容类型：

### 文本资源

```python
async with client:
    content = await client.read_resource("resource://config/settings.json")
    
    for item in content:
        if hasattr(item, 'text'):
            print(f"文本内容: {item.text}")
            print(f"MIME 类型: {item.mimeType}")
```

### 二进制资源

```python
async with client:
    content = await client.read_resource("resource://images/logo.png")
    
    for item in content:
        if hasattr(item, 'blob'):
            print(f"二进制内容: {len(item.blob)} 字节")
            print(f"MIME 类型: {item.mimeType}")
            
            # 保存到文件
            with open("downloaded_logo.png", "wb") as f:
                f.write(item.blob)
```

## 使用多服务器客户端

使用多服务器客户端时，资源 URI 会自动以服务器名称为前缀：

```python
async with client:  # Multi-server client
    # 访问来自不同服务器的资源
    weather_icons = await client.read_resource("weather://weather/icons/sunny")
    templates = await client.read_resource("resource://assistant/templates/list")
    
    print(f"天气图标: {weather_icons[0].blob}")
    print(f"模板: {templates[0].text}")
```

## 原始 MCP 协议访问

要访问完整的 MCP 协议对象，请使用 `*_mcp` 方法：

```python
async with client:
    # 原始 MCP 方法返回完整的协议对象
    resources_result = await client.list_resources_mcp()
    # resources_result -> mcp.types.ListResourcesResult
    
    templates_result = await client.list_resource_templates_mcp()
    # templates_result -> mcp.types.ListResourceTemplatesResult
    
    content_result = await client.read_resource_mcp("resource://example")
    # content_result -> mcp.types.ReadResourceResult
```

## 常见资源 URI 模式

不同的 MCP 服务器可能使用各种 URI 方案：

```python
# 文件系统资源
"file:///path/to/file.txt"

# 自定义协议资源  
"weather://london/current"
"database://users/123"

# 通用资源协议
"resource://config/settings"
"resource://templates/email"
```

<Tip>
资源 URI 及其格式取决于特定的 MCP 服务器实现。请查看服务器的文档以了解可用资源及其 URI 模式。
</Tip>